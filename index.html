<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slipy Bill Viewer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            padding: 10px;
        }
        
        .container {
            max-width: 400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: white;
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #e5e5e5;
        }
        
        .store-logo {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border: 3px solid #22c55e;
        }
        
        .store-logo::before {
            content: "ESTD 2024";
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            background: #22c55e;
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: bold;
        }
        
        .store-logo::after {
            content: "üçéü•ëüçìüçä";
            font-size: 24px;
            color: white;
        }
        
        .store-name {
            font-size: 18px;
            font-weight: bold;
            color: #22c55e;
            margin-bottom: 5px;
        }
        
        .store-tagline {
            font-size: 12px;
            color: #666;
            margin-bottom: 15px;
        }
        
        .store-info {
            font-size: 14px;
            color: #333;
            line-height: 1.4;
        }
        
        .bill-content {
            padding: 20px;
        }
        
        .invoice-details {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .invoice-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .invoice-label {
            color: #666;
            font-weight: 500;
        }
        
        .invoice-value {
            color: #333;
            font-weight: bold;
        }
        
        .payment-info {
            background: #e8f5e8;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #22c55e;
        }
        
        .payment-mode {
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
        }
        
        .buyer-info {
            font-size: 12px;
            color: #666;
        }
        
        .items-section {
            margin-bottom: 20px;
        }
        
        .items-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        
        .items-table th {
            background: #22c55e;
            color: white;
            padding: 10px 8px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .items-table td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #e5e5e5;
            font-size: 13px;
        }
        
        .item-description {
            text-align: left;
            font-weight: 500;
            color: #333;
        }
        
        .item-price {
            color: #333;
            font-weight: 500;
        }
        
        .item-qty {
            color: #333;
            font-weight: 500;
        }
        
        .item-gst {
            color: #666;
        }
        
        .item-total {
            color: #333;
            font-weight: bold;
        }
        
        .totals-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .total-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .total-row.final {
            border-top: 2px solid #22c55e;
            padding-top: 12px;
            margin-top: 12px;
            font-size: 16px;
            font-weight: bold;
            color: #333;
        }
        
        .total-label {
            color: #666;
            font-weight: 500;
        }
        
        .total-value {
            font-weight: bold;
            color: #333;
        }
        
        .promo-banner {
            background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .promo-banner::before {
            content: "";
            position: absolute;
            top: -50%;
            right: -20px;
            width: 100px;
            height: 100px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }
        
        .promo-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .promo-subtitle {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #ffeb3b;
        }
        
        .promo-text {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 10px;
        }
        
        .promo-offer {
            background: #ff4081;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
        }
        
        .connect-section {
            background: white;
            padding: 20px;
            text-align: center;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .connect-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border-radius: 50%;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .connect-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            text-decoration: none;
        }
        
        .whatsapp { background: #25d366; }
        .facebook { background: #1877f2; }
        .instagram { background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); }
        .linkedin { background: #0077b5; }
        
        .footer {
            background: #f8f9fa;
            padding: 20px;
            text-align: center;
            border-top: 1px solid #e9ecef;
        }
        
        .footer p {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .powered-by {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-top: 10px;
        }
        
        .slip-logo {
            background: #22c55e;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 12px;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }
        
        .error-message-card {
            background: #fff5f5;
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 20px;
            margin: 20px;
            text-align: center;
        }
        
        .error-icon {
            font-size: 48px;
            margin-bottom: 16px;
        }
        
        .error-message-card h3 {
            color: #dc2626;
            margin-bottom: 12px;
        }
        
        .error-message-card p {
            color: #7f1d1d;
            margin-bottom: 16px;
        }
        
        .error-debug {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 4px;
            padding: 12px;
            margin: 16px 0;
            text-align: left;
            font-size: 12px;
        }
        
        .error-debug p {
            margin: 4px 0;
            color: #991b1b;
        }
        
        .retry-btn {
            background: #dc2626;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            margin-top: 16px;
        }
        
        .retry-btn:hover {
            background: #b91c1c;
        }
        
        .error h3 {
            margin-bottom: 8px;
        }
        
        .retry-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            margin-top: 12px;
        }
        
        .retry-btn:hover {
            background: #c82333;
        }
        
        /* Store Image Styles (at top) */
        .store-image-container {
            text-align: center;
            margin: 20px 0;
            padding: 0 20px;
        }
        
        .store-image {
            max-width: 100%;
            max-height: 200px;
            width: 100%;
            height: 200px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            object-fit: cover;
        }
        
        /* Shop Picture Styles */
        .shop-picture-container {
            text-align: center;
            margin: 15px 0;
            padding: 0 20px;
        }
        
        .shop-picture {
            max-width: 200px;
            max-height: 150px;
            width: 200px;
            height: 150px;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            object-fit: cover;
        }
        
        /* Social Icons Styles */
        .social-icons-container {
            text-align: center;
            margin: 15px 0;
            padding: 0 20px;
        }
        
        .social-icons-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .social-icons {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: transform 0.2s ease;
        }
        
        .social-icon:hover {
            transform: scale(1.1);
        }
        
        .social-icon img {
            width: 24px;
            height: 24px;
            border-radius: 50%;
        }
        
        .social-icon i {
            font-size: 18px;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header" id="store-header">
            <div class="store-logo" id="store-logo" style="display: none;"></div>
            <div class="store-name" id="store-name">Loading...</div>
            <div class="store-tagline" id="store-tagline">Loading...</div>
            <div class="store-info" id="store-info">
                <div>Loading...</div>
            </div>
        </div>
        
        <!-- Shop Picture Section -->
        <div class="shop-picture-container" id="shop-picture-container" style="display: none;">
            <img id="shop-picture" src="" alt="Shop Picture" class="shop-picture">
        </div>
        
        <!-- Store Image Section (at top) -->
        <div class="store-image-container" id="store-image-container" style="display: none;">
            <img id="store-image" src="" alt="Store Image" class="store-image">
        </div>
        
        <!-- Social Icons Section -->
        <div class="social-icons-container" id="social-icons-container" style="display: none;">
            <div class="social-icons-title" id="social-icons-title">Connect with us</div>
            <div class="social-icons" id="social-icons">
                <!-- Social icons will be dynamically added here -->
            </div>
        </div>
        
        <div class="bill-content" id="bill-content">
            <div class="loading">
                <p>Loading bill details...</p>
            </div>
            </div>
            
        <div class="connect-section">
            <div class="connect-logo">üçéü•ëüçìüçä</div>
            <div class="connect-title">Connect with us</div>
            <div class="social-icons">
                <a href="#" class="social-icon whatsapp">üì±</a>
                <a href="#" class="social-icon facebook">üìò</a>
                <a href="#" class="social-icon instagram">üì∑</a>
                <a href="#" class="social-icon linkedin">üíº</a>
            </div>
        </div>
        
        <div class="footer">
            <div class="powered-by">
                <span>Powered by</span>
                <span class="slip-logo">SLIPY</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const urlParams = new URLSearchParams(window.location.search);
            const billId = urlParams.get('billId');
            const encodedData = urlParams.get('data');
            const billContentDiv = document.getElementById('bill-content');

            console.log('URL Parameters:', { 
                billId, 
                encodedData: encodedData ? 'Present' : 'Missing',
                test: urlParams.get('test'),
                debug: urlParams.get('debug')
            });

            if (billId && encodedData) {
                try {
                    console.log('Raw encoded data length:', encodedData.length);
                    console.log('Raw encoded data preview:', encodedData.substring(0, 100) + '...');
                    
                    // Try Base64 decode first, then fallback to URI decode
                    let billData;
                    try {
                        const decodedData = atob(encodedData); // Base64 decode
                        console.log('Base64 decoded data length:', decodedData.length);
                        billData = JSON.parse(decodedData);
                        console.log('‚úÖ Successfully parsed with Base64 decode');
                    } catch (base64Error) {
                        console.log('Base64 decode failed, trying URI decode:', base64Error.message);
                        const decodedData = decodeURIComponent(encodedData); // URI decode
                        console.log('URI decoded data length:', decodedData.length);
                        billData = JSON.parse(decodedData);
                        console.log('‚úÖ Successfully parsed with URI decode');
                    }
                    
                    console.log('‚úÖ Successfully parsed bill data:', billData);
                    console.log('Bill data items count:', billData.items ? billData.items.length : 'No items');
                    console.log('Bill data total:', billData.total);
                    
                    renderBill(billData);
                } catch (e) {
                    console.error('‚ùå Error parsing bill data:', e);
                    console.error('Error details:', e.message);
                    console.error('Stack trace:', e.stack);
                    showError(`Error parsing bill data: ${e.message}. Please try scanning the QR code again.`);
                }
            } else if (billId && urlParams.get('test') === 'true') {
                // Handle test mode
                console.log('üß™ Running in test mode');
                renderTestBill(billId);
            } else {
                console.log('‚ùå No valid data found');
                showError('No bill data found in URL. Please scan a valid QR code.');
            }

            function showError(message) {
                billContentDiv.innerHTML = `
                    <div class="error-message-card">
                        <div class="error-icon">‚ö†Ô∏è</div>
                        <h3>Error Loading Bill</h3>
                        <p>${message}</p>
                        <div class="error-debug">
                            <p><strong>Debug Info:</strong></p>
                            <p>URL: ${window.location.href}</p>
                            <p>Bill ID: ${urlParams.get('billId') || 'Not provided'}</p>
                            <p>Data: ${urlParams.get('data') ? 'Present' : 'Missing'}</p>
                            <p>Test Mode: ${urlParams.get('test') === 'true' ? 'Yes' : 'No'}</p>
                        </div>
                        <button class="retry-btn" onclick="location.reload()">Retry</button>
                    </div>
                `;
            }

            function renderTestBill(billId) {
                // Create test data that matches your app structure
                const testData = {
                    billId: billId,
                    posNumber: '987205',
                    paymentMode: 'Cash',
                    subtotal: 250.00,
                    salesTax: 0,
                    discount: 0,
                    posFee: 1.00,
                    total: 251.00,
                    saleDate: new Date().toISOString(),
                    storeInfo: {
                        storeName: 'FRUITS VALLEY',
                        tagline: 'FRUITS FARMING...',
                        location: 'Faizabad',
                        phone: '0516033777',
                        taxNumber: '1234588790',
                        taxLocation: 'Rawalpindi'
                    },
                    items: [
                        {
                            productName: 'Test Product 1',
                            salePrice: 100.00,
                            saleQuantity: 1,
                            gst: 0.00
                        },
                        {
                            productName: 'Test Product 2',
                            salePrice: 150.00,
                            saleQuantity: 1,
                            gst: 0.00
                        }
                    ],
                    promoTitle: 'Supermarket',
                    promoSubtitle: 'MEGA SALE',
                    promoText: 'Thank you for shopping with us! Visit again for more great deals.',
                    promoOffer: 'up to 50% OFF'
                };
                
                renderBill(testData);
            }

            function renderBill(saleData) {
                console.log('Rendering bill with data:', saleData);
                
                if (!saleData.items || !Array.isArray(saleData.items)) {
                    showError('Invalid bill data: No items found.');
                    return;
                }
                
                // Update store information dynamically
                updateStoreInfo(saleData.storeInfo || {});

                const itemsHTML = saleData.items.map((item, index) => `
                    <tr>
                        <td>${index + 1}</td>
                        <td class="item-description">${item.productName || 'Unknown Product'}</td>
                        <td class="item-price">${(item.salePrice || 0).toFixed(2)}</td>
                        <td class="item-qty">${item.saleQuantity || 0}</td>
                        <td class="item-gst">${(item.gst || 0).toFixed(2)}</td>
                        <td class="item-total">${((item.salePrice || 0) * (item.saleQuantity || 0)).toFixed(2)}</td>
                    </tr>
                `).join('');

                const currentDate = new Date(saleData.saleDate || Date.now());
                const formattedDate = currentDate.toLocaleDateString('en-GB');
                const formattedTime = currentDate.toLocaleTimeString('en-US', { hour12: true });

                billContentDiv.innerHTML = `
                    <div class="invoice-details">
                        <div class="invoice-row">
                            <span class="invoice-label">POS No:</span>
                            <span class="invoice-value">${saleData.posNumber || '987205'}</span>
                        </div>
                        <div class="invoice-row">
                            <span class="invoice-label">Invoice #:</span>
                            <span class="invoice-value">${saleData.billId || 'INV-' + Date.now()}</span>
                        </div>
                        <div class="invoice-row">
                            <span class="invoice-label">Date:</span>
                            <span class="invoice-value">${formattedDate} ${formattedTime}</span>
                        </div>
                    </div>
                    
                    <div class="payment-info">
                        <div class="payment-mode">Mode of Payment: ${saleData.paymentMode || 'Cash'}</div>
                        <div class="buyer-info">Name /CNIC/ NTN of the buyer (Optional for B2B)</div>
                    </div>
                    
                    <div class="items-section">
                        <table class="items-table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Description</th>
                                    <th>PKR</th>
                                    <th>Qty</th>
                                    <th>GST</th>
                                    <th>Total</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${itemsHTML}
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="totals-section">
                        <div class="total-row">
                            <span class="total-label">Total Amount:</span>
                            <span class="total-value">Rs ${(saleData.subtotal || 0).toFixed(2)}</span>
                        </div>
                        <div class="total-row">
                            <span class="total-label">Sales Tax:</span>
                            <span class="total-value">${saleData.salesTax ? 'Rs ' + saleData.salesTax.toFixed(2) : '-'}</span>
                        </div>
                        <div class="total-row">
                            <span class="total-label">Discount:</span>
                            <span class="total-value">${saleData.discount ? 'Rs ' + saleData.discount.toFixed(2) : '-'}</span>
                        </div>
                        <div class="total-row">
                            <span class="total-label">POS Fee:</span>
                            <span class="total-value">Rs ${(saleData.posFee || 1.00).toFixed(2)}</span>
                        </div>
                        <div class="total-row final">
                            <span class="total-label">Payable:</span>
                            <span class="total-value">${(saleData.total || 0).toLocaleString()}</span>
                        </div>
                    </div>
                    
                    <div class="promo-banner">
                        <div class="promo-title">${saleData.promoTitle || 'Supermarket'}</div>
                        <div class="promo-subtitle">${saleData.promoSubtitle || 'MEGA SALE'}</div>
                        <div class="promo-text">${saleData.promoText || 'Thank you for shopping with us! Visit again for more great deals.'}</div>
                        <div class="promo-offer">${saleData.promoOffer || 'up to 50% OFF'}</div>
                </div>
            `;
        }

            function getSocialIconClass(iconName) {
                const iconMap = {
                    'facebook': 'fab fa-facebook-f',
                    'instagram': 'fab fa-instagram',
                    'twitter': 'fab fa-twitter',
                    'linkedin': 'fab fa-linkedin-in',
                    'youtube': 'fab fa-youtube',
                    'whatsapp': 'fab fa-whatsapp',
                    'telegram': 'fab fa-telegram-plane',
                    'tiktok': 'fab fa-tiktok',
                    'snapchat': 'fab fa-snapchat-ghost',
                    'website': 'fas fa-globe',
                    'email': 'fas fa-envelope',
                    'phone': 'fas fa-phone',
                    'location': 'fas fa-map-marker-alt'
                };
                return iconMap[iconName.toLowerCase()] || 'fas fa-link';
            }

            function getSocialIconColor(iconName) {
                const colorMap = {
                    'facebook': '#1877f2',
                    'instagram': '#e4405f',
                    'twitter': '#1da1f2',
                    'linkedin': '#0077b5',
                    'youtube': '#ff0000',
                    'whatsapp': '#25d366',
                    'telegram': '#0088cc',
                    'tiktok': '#000000',
                    'snapchat': '#fffc00',
                    'website': '#2563eb',
                    'email': '#6b7280',
                    'phone': '#10b981',
                    'location': '#f59e0b'
                };
                return colorMap[iconName.toLowerCase()] || '#2563eb';
            }

            function updateStoreInfo(storeInfo) {
                const storeNameEl = document.getElementById('store-name');
                const storeTaglineEl = document.getElementById('store-tagline');
                const storeInfoEl = document.getElementById('store-info');
                const storeLogoEl = document.getElementById('store-logo');
                const shopPictureContainer = document.getElementById('shop-picture-container');
                const shopPicture = document.getElementById('shop-picture');

                if (storeNameEl) {
                    storeNameEl.textContent = storeInfo.storeName || 'Your Store';
                }
                
                if (storeTaglineEl) {
                    storeTaglineEl.textContent = storeInfo.tagline || 'Quality Products';
                }
                
                // Handle store logo if available
                if (storeLogoEl && storeInfo.storeImage) {
                    storeLogoEl.innerHTML = `<img src="${storeInfo.storeImage}" alt="Store Logo" style="max-width: 80px; max-height: 80px; border-radius: 8px;">`;
                    storeLogoEl.style.display = 'block';
                } else if (storeLogoEl) {
                    storeLogoEl.style.display = 'none';
                }
                
                // Handle store image at top if available
                const storeImageContainer = document.getElementById('store-image-container');
                const storeImage = document.getElementById('store-image');
                
                if (storeImageContainer && storeImage && storeInfo.storeImage) {
                    storeImage.src = storeInfo.storeImage;
                    storeImageContainer.style.display = 'block';
                } else if (storeImageContainer) {
                    storeImageContainer.style.display = 'none';
                }
                
                // Handle shop picture if available
                if (shopPictureContainer && shopPicture && storeInfo.shopPic) {
                    shopPicture.src = storeInfo.shopPic;
                    shopPictureContainer.style.display = 'block';
                } else if (shopPictureContainer) {
                    shopPictureContainer.style.display = 'none';
                }
                
                // Handle social icons if available
                const socialIconsContainer = document.getElementById('social-icons-container');
                const socialIcons = document.getElementById('social-icons');
                const socialIconsTitle = document.getElementById('social-icons-title');
                
                if (socialIconsContainer && socialIcons) {
                    // Always show social icons section
                    socialIconsTitle.textContent = 'Connect with us';
                    
                    if (storeInfo.socialIcons && storeInfo.socialIcons.length > 0) {
                        // Use provided social icons
                        let socialIconsHTML = '';
                        storeInfo.socialIcons.forEach(icon => {
                            if (icon.url && icon.name) {
                                const iconClass = getSocialIconClass(icon.name);
                                const iconColor = getSocialIconColor(icon.name);
                                socialIconsHTML += `
                                    <a href="${icon.url}" target="_blank" class="social-icon" style="background-color: ${icon.color || iconColor};">
                                        <i class="${iconClass}"></i>
                                    </a>
                                `;
                            }
                        });
                        socialIcons.innerHTML = socialIconsHTML;
                    } else {
                        // Show default social icons
                        socialIcons.innerHTML = `
                            <a href="#" class="social-icon" style="background-color: #1877f2;">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a href="#" class="social-icon" style="background-color: #e4405f;">
                                <i class="fab fa-instagram"></i>
                            </a>
                            <a href="#" class="social-icon" style="background-color: #25d366;">
                                <i class="fab fa-whatsapp"></i>
                            </a>
                            <a href="#" class="social-icon" style="background-color: #1da1f2;">
                                <i class="fab fa-twitter"></i>
                            </a>
                        `;
                    }
                    socialIconsContainer.style.display = 'block';
                }
                
                if (storeInfoEl) {
                    let storeInfoHTML = `<div>üìç ${storeInfo.location || 'Your Location'}</div>`;
                    storeInfoHTML += `<div>üìû ${storeInfo.phone || 'Your Phone'}</div>`;
                    
                    if (storeInfo.taxNumber && storeInfo.taxNumber !== 'Your Tax Number') {
                        storeInfoHTML += `<div>üè¢ Tax #: ${storeInfo.taxNumber}</div>`;
                    }
                    
                    if (storeInfo.taxLocation && storeInfo.taxLocation !== 'Your City') {
                        storeInfoHTML += `<div>üìç ${storeInfo.taxLocation}</div>`;
                    }
                    
                    if (storeInfo.email && storeInfo.email !== 'Your Email') {
                        storeInfoHTML += `<div>üìß ${storeInfo.email}</div>`;
                    }
                    
                    if (storeInfo.website && storeInfo.website !== 'Your Website') {
                        storeInfoHTML += `<div>üåê ${storeInfo.website}</div>`;
                    }
                    
                    storeInfoEl.innerHTML = storeInfoHTML;
                }
            }
        });
    </script>
</body>
</html>